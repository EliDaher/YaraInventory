import{f as G,r as b,j as o,J as R,c as V}from"./index-D9SdI5e-.js";import{u as z}from"./customer-DH1gCgY9.js";import{u as $}from"./useMutation-lyefXRX2.js";import{B as Y}from"./button-C_OZHrl6.js";import{u as Z}from"./supplier-D1yL56Mb.js";import{k as T,g as A,u as k,s as w,e as U,n as ee}from"./DefaultPropsProvider-vuOrHUjA.js";import{h as g,T as j,t as H,d as te,g as D,k as E}from"./useSlot-C-9D5Kty.js";function ae(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function re(e){return parseFloat(e)}function Se({customer:e,setCustomer:a,isSupplier:r=!1}){const n=G(),i=b.useRef(null),[d,l]=b.useState(!1);b.useEffect(()=>{i.current&&l(JSON.stringify(e)!==JSON.stringify(i.current))},[e]),b.useEffect(()=>{e&&(i.current=structuredClone(e),l(!1))},[e.id,e._id]);const c=(t,s)=>{a(v=>({...v,[t]:s}))},y=async()=>{r?C.mutate(e):u.mutate(e)},u=$({mutationFn:async t=>{const s=t.id||t._id;if(!s)throw new Error("Customer ID not found");return z(s,t)},onSuccess:(t,s)=>{i.current=structuredClone(s),l(!1),n.invalidateQueries({queryKey:["customers-table"]}),R.success("تم حفظ التعديلات!")},onError:t=>{console.error(t),R.error("حدث خطأ أثناء حفظ التعديلات")}}),C=$({mutationFn:async t=>{const s=t.id||t._id;if(!s)throw new Error("Supplier ID not found");return Z(s,t)},onSuccess:(t,s)=>{i.current=structuredClone(s),l(!1),n.invalidateQueries({queryKey:["suppliers-table"]}),R.success("تم حفظ التعديلات!")},onError:t=>{console.error(t),R.error("حدث خطأ أثناء حفظ التعديلات")}}),p=t=>({name:"الاسم",balance:"الرصيد",createdAt:"تاريخ الإنشاء",createdDate:"تاريخ الإنشاء",updatedDate:"تاريخ آخر تعديل",number:"الرقم"})[t]||t;return e?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 w-full",children:[Object.entries(e).map(([t,s])=>["id","purchases","payments"].includes(t)?null:t==="createdAt"?o.jsxs("div",{className:"flex gap-2 mb-4 items-end",children:[o.jsxs("label",{className:"font-bold w-36",children:[p(t),":"]}),o.jsx("input",{value:new Date(s).toLocaleString("en-GB"),disabled:!0,className:"bg-transparent border-b-2 w-full"})]},t):o.jsxs("div",{className:"flex gap-2 mb-4 items-end group relative",children:[o.jsxs("label",{className:"font-bold w-36",children:[p(t),":"]}),o.jsx("input",{readOnly:t==="id"||t==="balance",disabled:t==="address",value:s??"",onChange:v=>c(t,v.target.value),className:"bg-transparent border-b-2 border-transparent focus:border-primary-500 outline-none transition-all w-full"}),o.jsx("span",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-primary-500 scale-x-0 group-hover:scale-x-100 transition-transform"})]},t)),d&&o.jsx(Y,{variant:"accent",className:"w-full",disabled:u.isPending,onClick:y,children:u.isPending?"جارٍ الحفظ...":"حفظ التعديلات"})]}):null}function se(e){return A("MuiCardHeader",e)}const N=T("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ne=e=>{const{classes:a}=e;return U({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},se,a)},oe=w("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>[{[`& .${N.title}`]:a.title},{[`& .${N.subheader}`]:a.subheader},a.root]})({display:"flex",alignItems:"center",padding:16}),ie=w("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),le=w("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),de=w("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${H.root}:where(& .${N.title})`]:{display:"block"},[`.${H.root}:where(& .${N.subheader})`]:{display:"block"}}),we=b.forwardRef(function(a,r){const n=k({props:a,name:"MuiCardHeader"}),{action:i,avatar:d,component:l="div",disableTypography:c=!1,subheader:y,subheaderTypographyProps:u,title:C,titleTypographyProps:p,slots:t={},slotProps:s={},...v}=n,h={...n,component:l,disableTypography:c},m=ne(h),f={slots:t,slotProps:{title:p,subheader:u,...s}};let x=C;const[I,B]=g("title",{className:m.title,elementType:j,externalForwardedProps:f,ownerState:h,additionalProps:{variant:d?"body2":"h5",component:"span"}});x!=null&&x.type!==j&&!c&&(x=o.jsx(I,{...B,children:x}));let S=y;const[F,O]=g("subheader",{className:m.subheader,elementType:j,externalForwardedProps:f,ownerState:h,additionalProps:{variant:d?"body2":"body1",color:"textSecondary",component:"span"}});S!=null&&S.type!==j&&!c&&(S=o.jsx(F,{...O,children:S}));const[_,J]=g("root",{ref:r,className:m.root,elementType:oe,externalForwardedProps:{...f,...v,component:l},ownerState:h}),[K,X]=g("avatar",{className:m.avatar,elementType:ie,externalForwardedProps:f,ownerState:h}),[q,Q]=g("content",{className:m.content,elementType:de,externalForwardedProps:f,ownerState:h}),[L,W]=g("action",{className:m.action,elementType:le,externalForwardedProps:f,ownerState:h});return o.jsxs(_,{...J,children:[d&&o.jsx(K,{...X,children:d}),o.jsxs(q,{...Q,children:[x,S]}),i&&o.jsx(L,{...W,children:i})]})});function ce(e){return A("MuiSkeleton",e)}T("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const ue=e=>{const{classes:a,variant:r,animation:n,hasChildren:i,width:d,height:l}=e;return U({root:["root",r,n,i&&"withChildren",i&&!d&&"fitContent",i&&!l&&"heightAuto"]},ce,a)},P=E`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,M=E`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,pe=typeof P!="string"?D`
        animation: ${P} 2s ease-in-out 0.5s infinite;
      `:null,he=typeof M!="string"?D`
        &::after {
          animation: ${M} 2s linear 0.5s infinite;
        }
      `:null,me=w("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,a[r.variant],r.animation!==!1&&a[r.animation],r.hasChildren&&a.withChildren,r.hasChildren&&!r.width&&a.fitContent,r.hasChildren&&!r.height&&a.heightAuto]}})(te(({theme:e})=>{const a=ae(e.shape.borderRadius)||"px",r=re(e.shape.borderRadius);return{display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:ee(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${a}/${Math.round(r/.6*10)/10}${a}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:({ownerState:n})=>n.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:n})=>n.hasChildren&&!n.width,style:{maxWidth:"fit-content"}},{props:({ownerState:n})=>n.hasChildren&&!n.height,style:{height:"auto"}},{props:{animation:"pulse"},style:pe||{animation:`${P} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(e.vars||e).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:he||{"&::after":{animation:`${M} 2s linear 0.5s infinite`}}}]}})),Re=b.forwardRef(function(a,r){const n=k({props:a,name:"MuiSkeleton"}),{animation:i="pulse",className:d,component:l="span",height:c,style:y,variant:u="text",width:C,...p}=n,t={...n,animation:i,component:l,variant:u,hasChildren:!!p.children},s=ue(t);return o.jsx(me,{as:l,ref:r,className:V(s.root,d),ownerState:t,...p,style:{width:C,height:c,...y}})});export{we as C,Se as D,Re as S};
