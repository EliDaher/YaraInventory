import{N as S,z as g,r,j as a}from"./index-CjkZiZSH.js";import{D as M}from"./badge-BuRiJ7vp.js";import{A as T,T as P,P as L}from"./TransfareForm-BcTePaBH.js";import{C as R,a as z,b as A}from"./card-BqDxa_jD.js";import{S as B}from"./StatsCard-AQKxSwPw.js";import{C as f}from"./ChartContainer-BT2-_kmU.js";import{F as E}from"./FilterSelection-CTNQYPR9.js";import{C as I}from"./CardContent-eFVOvZkr.js";import{c as N}from"./button-BgzGu4Sa.js";import"./user-CdSRfBsv.js";import"./house-DPQolJEK.js";import"./FormInput-ZUc2U5_b.js";import"./input-BnqY-c5L.js";import"./useMutation-2hLPBwUX.js";import"./transaction-BYWW-0Q4.js";import"./index-D6P9idiZ.js";import"./SupplierSelect-B4hatSHp.js";import"./supplier-Dt2FfB-h.js";import"./DataTable-DMCrox0U.js";import"./table-BMBfgQsc.js";import"./search-Bz7BPxDg.js";import"./PaymentTypeSelector-y1CAldA5.js";import"./DefaultPropsProvider-DNL-d3Gt.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=N("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]),dt=()=>{var d,c,u,h,y;const{id:j}=S(),s=((d=g().state)==null?void 0:d.products)||[],[x,n]=r.useState(!1),[k,w]=r.useState({}),[v,l]=r.useState(!1),[C,F]=r.useState(null),[o,b]=r.useState("all"),i=r.useMemo(()=>{if(!s)return[];let t=s;return o!=="all"&&(t=t.filter(e=>e.warehouse===o)),t},[s,o]),O=Object.values(s||{}).reduce((t,e)=>(t[e.warehouse]||(t[e.warehouse]=0),t[e.warehouse]+=1,t),{}),p=(u=(c=Object.entries(O))==null?void 0:c.slice(0,5))==null?void 0:u.map(([t,e])=>({name:t,value:e})),D=Object.values(i||{}).reduce((t,e)=>(t[e.name]||(t[e.name]=0),t[e.name]+=e.quantity,t),{}),m=(y=(h=Object.entries(D).sort((t,e)=>e[1]-t[1]))==null?void 0:h.slice(0,7))==null?void 0:y.map(([t,e])=>({name:t,value:e}));return a.jsxs(M,{children:[a.jsx(T,{isOpen:v,setIsOpen:l,row:C}),a.jsx(P,{isOpen:x,setIsOpen:n,row:k}),a.jsxs(R,{children:[a.jsx(z,{children:a.jsx(A,{children:j})}),a.jsxs(I,{className:"space-y-4",children:[a.jsx(E,{DataToFilter:s,selectedFilter:o,setSelectedFilter:b,FilterBy:"warehouse",Placeholder:"اختر المستودع"}),a.jsx(B,{title:"عدد المنتجات",value:(i==null?void 0:i.length)||0,icon:V}),a.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2",children:[a.jsx(f,{title:"توزيع المنتجات حسب المخازن",data:p||[],type:"pie",dataKey:"value"}),a.jsx(f,{title:"أكثر المنتجات كمية",data:m||[],type:"bar",dataKey:"value"})]})]})]}),a.jsx(L,{productsData:s,setEditRow:F,setOpenForm:l,setOpenTransfare:n,setProductRow:w})]})};export{dt as default};
