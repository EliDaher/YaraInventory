import{c as T,j as e,r as s,u as B,D as L,B as N,L as R}from"./index-B9Hbub3a.js";import{S as q}from"./StatsCard-ZcWDh60S.js";import{A,T as D,P as I}from"./TransfareForm-ClIJHWk7.js";import{C as M,a as E,b as V,c as H}from"./card-DW6a6Si8.js";import{S as W,a as Z,b as z,c as G,d as F,F as b}from"./FormInput-Cd4NdAnV.js";import"./badge-B0P1iBeR.js";import"./transaction-f63TGXsa.js";import"./index-Cjsei0OF.js";import"./SupplierSelect-BJfh3dkJ.js";import"./supplier-8jLn8UfL.js";import"./DataTable-Dhrv2TO0.js";import"./table-Dn0IiQCR.js";import"./input-2o4aYGpX.js";import"./search-C1TpxlMX.js";import"./PaymentTypeSelector-gS2GznI_.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=T("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);function C({DataToFilter:p,selectedFilter:i,setSelectedFilter:m,FilterBy:x,Placeholder:h}){return e.jsxs(W,{value:i,onValueChange:m,children:[e.jsx(Z,{children:e.jsx(z,{placeholder:h})}),e.jsxs(G,{children:[e.jsx(F,{value:"all",children:"الكل"},"all"),[...new Set(Object.values(p||{}).flatMap(r=>Object.values(r)).map(r=>{var n;return(n=r[x])==null?void 0:n.trim()}).filter(Boolean))].map(r=>e.jsx(F,{value:r,children:r},r))]})]})}function ne(){const[p,i]=s.useState(!1),[m,x]=s.useState({}),[h,r]=s.useState(!1),[n,w]=s.useState(null),[c,g]=s.useState("all"),[d,y]=s.useState("all"),[j,P]=s.useState("all"),[S,v]=s.useState(!1),[l,f]=s.useState([0,1e5]),{data:o=[],isLoading:k}=B(),u=s.useMemo(()=>{if(!o)return[];let t=o;return c!=="all"&&(t=t.filter(a=>a.warehouse===c)),d!=="all"&&(t=t.filter(a=>a.category===d)),j!=="all"&&(t=t.filter(a=>j==="out"?a.quantity===0:a.quantity>0&&a.quantity<5)),S&&(t=t.filter(a=>a.quantity<=5)),t=t.filter(a=>a.sellPrice>=l[0]&&a.sellPrice<=l[1]),t},[o,c,d,j,S,l]),O=u==null?void 0:u.reduce((t,a)=>t+(a.payPrice||1)*(a.quantity||1),0);return e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{dir:"rtl",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:e.jsx(q,{onClick:()=>{},title:"اجماري رصيد المنتجات",value:O.toFixed(2)||0,icon:J,onlyAdmin:!0})}),e.jsx(A,{isOpen:h,setIsOpen:r,row:n}),e.jsx(D,{isOpen:p,setIsOpen:i,row:m}),e.jsxs(M,{children:[e.jsx(E,{children:e.jsx(V,{children:"الفلاتر"})}),e.jsxs(H,{className:"grid gap-4",children:[e.jsx(C,{DataToFilter:o,selectedFilter:d,setSelectedFilter:y,FilterBy:"category",Placeholder:"اختر الصنف"}),e.jsx(C,{DataToFilter:o,selectedFilter:c,setSelectedFilter:g,FilterBy:"warehouse",Placeholder:"اختر المستودع"}),e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx("span",{children:"السعر:"}),e.jsx(b,{label:"",type:"number",className:"border rounded px-2 py-1",value:l[0],onChange:t=>f([Number(t.target.value),l[1]]),placeholder:"min"}),"-",e.jsx(b,{label:"",type:"number",className:"border rounded px-2 py-1",value:l[1],onChange:t=>f([l[0],Number(t.target.value)]),placeholder:"max"})]}),e.jsx(N,{variant:"outline",onClick:()=>{g("all"),y("all"),P("all"),v(!1),f([0,1e5])},children:"إعادة تعيين الفلاتر"})]})]}),k?e.jsx(R,{}):e.jsx(I,{productsData:u,setEditRow:w,setOpenForm:r,setOpenTransfare:i,setProductRow:x})]})})}export{ne as default};
