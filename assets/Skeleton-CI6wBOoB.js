import{h as W,r as b,j as o,d as G}from"./index-DiQH1MVD.js";import{u as V}from"./customer-Dxl2PIIk.js";import{u as M}from"./useMutation-B7Bn7gVY.js";import{B as z}from"./button-OYVM9TCz.js";import{u as Y}from"./supplier-BLv6n95A.js";import{k as H,g as T,u as A,s as w,e as k,n as Z}from"./DefaultPropsProvider-D3-9STDd.js";import{h as g,T as R,t as $,d as ee,g as U,k as D}from"./useSlot-Di08Bqv2.js";function te(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function ae(e){return parseFloat(e)}function xe({customer:e,setCustomer:a,isSupplier:r=!1}){const n=W(),i=b.useRef(null),[d,l]=b.useState(!1);b.useEffect(()=>{i.current&&l(JSON.stringify(e)!==JSON.stringify(i.current))},[e]),b.useEffect(()=>{e&&(i.current=structuredClone(e),l(!1))},[e.id,e._id]);const c=(t,s)=>{a(v=>({...v,[t]:s}))},y=async()=>{r?C.mutate(e):u.mutate(e)},u=M({mutationFn:async t=>{const s=t.id||t._id;if(!s)throw new Error("Customer ID not found");return V(s,t)},onSuccess:(t,s)=>{i.current=structuredClone(s),l(!1),n.invalidateQueries({queryKey:["customers-table"]}),alert("تم حفظ التعديلات!")},onError:t=>{console.error(t),alert("حدث خطأ أثناء حفظ التعديلات")}}),C=M({mutationFn:async t=>{const s=t.id||t._id;if(!s)throw new Error("Supplier ID not found");return Y(s,t)},onSuccess:(t,s)=>{i.current=structuredClone(s),l(!1),n.invalidateQueries({queryKey:["suppliers-table"]}),alert("تم حفظ التعديلات!")},onError:t=>{console.error(t),alert("حدث خطأ أثناء حفظ التعديلات")}}),p=t=>({name:"الاسم",balance:"الرصيد",createdAt:"تاريخ الإنشاء",createdDate:"تاريخ الإنشاء",updatedDate:"تاريخ آخر تعديل",number:"الرقم"})[t]||t;return e?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 w-full",children:[Object.entries(e).map(([t,s])=>["id","purchases","payments"].includes(t)?null:t==="createdAt"?o.jsxs("div",{className:"flex gap-2 mb-4 items-end",children:[o.jsxs("label",{className:"font-bold w-36",children:[p(t),":"]}),o.jsx("input",{value:new Date(s).toLocaleString("en-GB"),disabled:!0,className:"bg-transparent border-b-2 w-full"})]},t):o.jsxs("div",{className:"flex gap-2 mb-4 items-end group relative",children:[o.jsxs("label",{className:"font-bold w-36",children:[p(t),":"]}),o.jsx("input",{readOnly:t==="id"||t==="balance",disabled:t==="address",value:s??"",onChange:v=>c(t,v.target.value),className:"bg-transparent border-b-2 border-transparent focus:border-primary-500 outline-none transition-all w-full"}),o.jsx("span",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-primary-500 scale-x-0 group-hover:scale-x-100 transition-transform"})]},t)),d&&o.jsx(z,{variant:"accent",className:"w-full",disabled:u.isPending,onClick:y,children:u.isPending?"جارٍ الحفظ...":"حفظ التعديلات"})]}):null}function re(e){return T("MuiCardHeader",e)}const j=H("MuiCardHeader",["root","avatar","action","content","title","subheader"]),se=e=>{const{classes:a}=e;return k({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},re,a)},ne=w("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>[{[`& .${j.title}`]:a.title},{[`& .${j.subheader}`]:a.subheader},a.root]})({display:"flex",alignItems:"center",padding:16}),oe=w("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),ie=w("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),le=w("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${$.root}:where(& .${j.title})`]:{display:"block"},[`.${$.root}:where(& .${j.subheader})`]:{display:"block"}}),Se=b.forwardRef(function(a,r){const n=A({props:a,name:"MuiCardHeader"}),{action:i,avatar:d,component:l="div",disableTypography:c=!1,subheader:y,subheaderTypographyProps:u,title:C,titleTypographyProps:p,slots:t={},slotProps:s={},...v}=n,h={...n,component:l,disableTypography:c},m=se(h),f={slots:t,slotProps:{title:p,subheader:u,...s}};let x=C;const[E,I]=g("title",{className:m.title,elementType:R,externalForwardedProps:f,ownerState:h,additionalProps:{variant:d?"body2":"h5",component:"span"}});x!=null&&x.type!==R&&!c&&(x=o.jsx(E,{...I,children:x}));let S=y;const[B,F]=g("subheader",{className:m.subheader,elementType:R,externalForwardedProps:f,ownerState:h,additionalProps:{variant:d?"body2":"body1",color:"textSecondary",component:"span"}});S!=null&&S.type!==R&&!c&&(S=o.jsx(B,{...F,children:S}));const[O,_]=g("root",{ref:r,className:m.root,elementType:ne,externalForwardedProps:{...f,...v,component:l},ownerState:h}),[K,X]=g("avatar",{className:m.avatar,elementType:oe,externalForwardedProps:f,ownerState:h}),[q,Q]=g("content",{className:m.content,elementType:le,externalForwardedProps:f,ownerState:h}),[J,L]=g("action",{className:m.action,elementType:ie,externalForwardedProps:f,ownerState:h});return o.jsxs(O,{..._,children:[d&&o.jsx(K,{...X,children:d}),o.jsxs(q,{...Q,children:[x,S]}),i&&o.jsx(J,{...L,children:i})]})});function de(e){return T("MuiSkeleton",e)}H("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const ce=e=>{const{classes:a,variant:r,animation:n,hasChildren:i,width:d,height:l}=e;return k({root:["root",r,n,i&&"withChildren",i&&!d&&"fitContent",i&&!l&&"heightAuto"]},de,a)},N=D`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,P=D`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,ue=typeof N!="string"?U`
        animation: ${N} 2s ease-in-out 0.5s infinite;
      `:null,pe=typeof P!="string"?U`
        &::after {
          animation: ${P} 2s linear 0.5s infinite;
        }
      `:null,he=w("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,a[r.variant],r.animation!==!1&&a[r.animation],r.hasChildren&&a.withChildren,r.hasChildren&&!r.width&&a.fitContent,r.hasChildren&&!r.height&&a.heightAuto]}})(ee(({theme:e})=>{const a=te(e.shape.borderRadius)||"px",r=ae(e.shape.borderRadius);return{display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Z(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${a}/${Math.round(r/.6*10)/10}${a}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:({ownerState:n})=>n.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:n})=>n.hasChildren&&!n.width,style:{maxWidth:"fit-content"}},{props:({ownerState:n})=>n.hasChildren&&!n.height,style:{height:"auto"}},{props:{animation:"pulse"},style:ue||{animation:`${N} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(e.vars||e).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:pe||{"&::after":{animation:`${P} 2s linear 0.5s infinite`}}}]}})),we=b.forwardRef(function(a,r){const n=A({props:a,name:"MuiSkeleton"}),{animation:i="pulse",className:d,component:l="span",height:c,style:y,variant:u="text",width:C,...p}=n,t={...n,animation:i,component:l,variant:u,hasChildren:!!p.children},s=ce(t);return o.jsx(he,{as:l,ref:r,className:G(s.root,d),ownerState:t,...p,style:{width:C,height:c,...y}})});export{Se as C,xe as D,we as S};
