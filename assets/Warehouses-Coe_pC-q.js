import{c as u,f as N,D as C,j as e,E as S,i as w,r as f}from"./index-H-wgWPw7.js";import{u as k,D,B as z}from"./badge-gArzQKeM.js";import{C as g,a as j,c as v,b as F}from"./card-C8MkjIzB.js";import{B as x}from"./button-CZhGKD8l.js";import{L}from"./Loading-Vqq_630M.js";import{P as M,F as b}from"./FormInput-CFG--yAp.js";import{z as m,u as P,t as W}from"./index-CIZHzbwz.js";import{S as E}from"./search-CSdeKlk2.js";import{C as y}from"./calendar-DXDkgtJv.js";import"./house-DbJPSTe7.js";import"./input-BZKj_cJR.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=u("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=u("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=u("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),q=m.object({name:m.string().min(1,"اسم المستودع مطلوب"),location:m.string().min(1,"الموقع مطلوب")}),O=({isOpen:r,setIsOpen:n})=>{var h,p;const l=N(),{register:i,handleSubmit:a,reset:o,formState:{errors:c}}=P({resolver:W(q),defaultValues:{name:"",location:""}}),t=k({mutationFn:d=>C(d.name,d.location),onSuccess:()=>{o(),n(!1),l.invalidateQueries({queryKey:["warehouses-table"]})}}),s=d=>{t.mutate(d)};return e.jsx(M,{title:"إضافة مستودع جديد",trigger:e.jsx(e.Fragment,{}),isOpen:r,setIsOpen:n,children:e.jsxs("form",{onSubmit:a(s),className:"space-y-4",children:[e.jsx(b,{label:"اسم المستودع",placeholder:"مثال: المستودع الرئيسي",error:(h=c.name)==null?void 0:h.message,...i("name")}),e.jsx(b,{label:"الموقع",placeholder:"دمشق - المزة",error:(p=c.location)==null?void 0:p.message,...i("location")}),e.jsx("div",{className:"flex justify-end gap-2 pt-2",children:e.jsx(x,{className:"w-full",type:"submit",disabled:t.isPending,children:t.isPending?"جاري الحفظ...":"حفظ"})})]})})};function Y(){const{data:r=[],isLoading:n}=S(),l=w(),[i,a]=f.useState(!1),[o,c]=f.useState(""),t=r.filter(s=>`${s.name} ${s.location||""}`.toLowerCase().includes(o.toLowerCase()));return e.jsx(D,{children:n?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsx(O,{isOpen:i,setIsOpen:a}),e.jsxs(g,{children:[e.jsxs(j,{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"المستودعات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إدارة جميع المستودعات ومتابعة حالتها"})]}),e.jsxs("div",{className:"flex w-full gap-2 sm:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-[260px]",children:[e.jsx(E,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx("input",{value:o,onChange:s=>c(s.target.value),placeholder:"ابحث عن مستودع...",className:"h-10 w-full rounded-md border bg-background pl-10 pr-3 text-sm outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs(x,{onClick:()=>a(!0),className:"gap-2",children:[e.jsx($,{size:18}),"إضافة"]})]})]}),e.jsxs(v,{children:[r.length===0&&e.jsxs("div",{className:"flex h-[300px] flex-col items-center justify-center gap-2 rounded-xl border border-dashed text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"لا يوجد مستودعات بعد"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ابدأ بإضافة أول مستودع لإدارة المخزون"}),e.jsx(x,{variant:"outline",onClick:()=>a(!0),children:"إضافة مستودع"})]}),t.length===0&&e.jsx("div",{className:"flex h-[300px] flex-col items-center justify-center gap-2 rounded-xl border border-dashed text-center",children:e.jsx("p",{className:"text-lg font-medium",children:"لا يوجد مستودعات مطابقة للبحث"})}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.map(s=>e.jsxs(g,{onDoubleClick:()=>l(`/warehouses/${s.name}`),className:"group relative overflow-hidden transition-all hover:-translate-y-1 hover:shadow-lg",children:[e.jsxs(j,{className:"flex flex-row items-start justify-between gap-2",children:[e.jsx("div",{children:e.jsx(F,{className:"text-lg font-semibold",children:s.name})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:s.isActive?"default":"secondary",children:s.isActive?"نشط":"غير نشط"}),e.jsx("button",{onClick:()=>l(`/warehouses/${s.name}`),className:"rounded-md p-1 text-muted-foreground transition hover:bg-muted hover:text-primary",title:"عرض التفاصيل",children:e.jsx(A,{size:18})})]})]}),e.jsxs(v,{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(B,{size:16}),e.jsx("span",{children:s.location||"الموقع غير محدد"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(y,{size:16}),e.jsxs("span",{children:["إنشاء:"," ",new Date(s.createdDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(y,{size:16}),e.jsxs("span",{children:["آخر تحديث:"," ",new Date(s.updatedDate).toLocaleDateString()]})]})]}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-[2px] bg-primary scale-x-0 transition-transform group-hover:scale-x-100"})]},s.name))})]})]})]})})}export{Y as default};
