import{l as n,r as s,e as c,j as a}from"./index-DXJC0gxo.js";import{D as d}from"./DataTable-DfamvYLU.js";import{D as p}from"./badge-COXlAnRb.js";import{g as b}from"./customer-iYI0gmL3.js";import{C as f}from"./AddCustomerForm-DRGt_ls2.js";import{S as g}from"./StatsCard-C_tfkNIL.js";import{H as y}from"./hand-coins-eGBI5EcB.js";import"./table-Cz6ToIEw.js";import"./card-k2cBTq1y.js";import"./button-Dl2RVhdx.js";import"./input-B8413TkC.js";import"./search-lZXwueMP.js";import"./user-CYuIBy2Y.js";import"./house-CF7zLO4F.js";import"./FormInput-jf5cEK0U.js";import"./useMutation-9gywVg79.js";function H(){const o=n(),[l,i]=s.useState(!1),{data:t,isLoading:x}=c({queryKey:["customers-table"],queryFn:b}),m=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"balance",label:"الرصيد",sortable:!0},{key:"purchasesCount",label:"عدد عمليات الشراء",sortable:!0},{key:"updatedDate",label:"اخر عملية",sortable:!0}],u=s.useMemo(()=>(t==null?void 0:t.filter(e=>e.balance<0).reduce((e,r)=>e+Number(r.balance),0))||0,[t]);return a.jsxs(p,{children:[a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:a.jsx(g,{title:"ديون على الزبائن",value:-u.toFixed(2)||0,icon:y})}),a.jsx(d,{title:"الزبائن",titleButton:a.jsx(f,{isOpen:l,setIsOpen:i,className:"w-full mb-2"}),columns:m,data:t?Object.values(t).map(e=>{var r;return typeof e=="object"?{...e,purchasesCount:((r=e.purchases)==null?void 0:r.length)??0}:e}):[],onRowClick:e=>{o("/customerDetails",{state:{id:e.id}})}})]})}export{H as default};
