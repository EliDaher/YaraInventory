import{c as B,j as e,r as a,u as L,L as N}from"./index-DiQH1MVD.js";import{S as q}from"./StatsCard-CQLloizw.js";import{D as O}from"./badge-Bx_Zl_Rk.js";import{A as R,T as A,P as D}from"./TransfareForm-Cn00zerB.js";import{B as I}from"./button-OYVM9TCz.js";import{C as V,a as E,b as M,c as H}from"./card-DyAJYzyZ.js";import{S as W,a as Z,b as z,c as G,d as F,F as C}from"./FormInput-CASvz7qr.js";import"./house-C1rh5GAz.js";import"./useMutation-B7Bn7gVY.js";import"./transaction-Ccp5uWBE.js";import"./index-sROSo7XJ.js";import"./SupplierSelect-B_pDNaXv.js";import"./supplier-BLv6n95A.js";import"./DataTable-wCIb_9w-.js";import"./table-BP0LvNdy.js";import"./input-Ynq1ZRzp.js";import"./search-C3BaVPNY.js";import"./PaymentTypeSelector-DxuXxXDr.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=B("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);function w({DataToFilter:m,selectedFilter:i,setSelectedFilter:p,FilterBy:x,Placeholder:h}){const n=Array.from(new Set(m.map(s=>String(s[x]??"").trim()).filter(Boolean)));return e.jsxs(W,{value:i,onValueChange:p,children:[e.jsx(Z,{children:e.jsx(z,{placeholder:h})}),e.jsxs(G,{children:[e.jsx(F,{value:"all",children:"الكل"}),n.map(s=>e.jsx(F,{value:s,children:s},s))]})]})}function ue(){const[m,i]=a.useState(!1),[p,x]=a.useState({}),[h,n]=a.useState(!1),[s,b]=a.useState(null),[c,g]=a.useState("all"),[d,y]=a.useState("all"),[f,P]=a.useState("all"),[S,v]=a.useState(!1),[l,j]=a.useState([0,1e5]),{data:o=[],isLoading:k}=L(),u=a.useMemo(()=>{if(!o)return[];let t=o;return c!=="all"&&(t=t.filter(r=>r.warehouse===c)),d!=="all"&&(t=t.filter(r=>r.category===d)),f!=="all"&&(t=t.filter(r=>f==="out"?r.quantity===0:r.quantity>0&&r.quantity<5)),S&&(t=t.filter(r=>r.quantity<=5)),t=t.filter(r=>r.sellPrice>=l[0]&&r.sellPrice<=l[1]),t},[o,c,d,f,S,l]),T=u==null?void 0:u.reduce((t,r)=>t+(r.payPrice||1)*(r.quantity||1),0);return e.jsx(O,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{dir:"rtl",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:e.jsx(q,{onClick:()=>{},title:"اجماري رصيد المنتجات",value:T.toFixed(2)||0,icon:J,onlyAdmin:!0})}),e.jsx(R,{isOpen:h,setIsOpen:n,row:s}),e.jsx(A,{isOpen:m,setIsOpen:i,row:p}),e.jsxs(V,{children:[e.jsx(E,{children:e.jsx(M,{children:"الفلاتر"})}),e.jsxs(H,{className:"grid gap-4",children:[e.jsx(w,{DataToFilter:o,selectedFilter:d,setSelectedFilter:y,FilterBy:"category",Placeholder:"اختر الصنف"}),e.jsx(w,{DataToFilter:o,selectedFilter:c,setSelectedFilter:g,FilterBy:"warehouse",Placeholder:"اختر المستودع"}),e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx("span",{children:"السعر:"}),e.jsx(C,{label:"",type:"number",className:"border rounded px-2 py-1",value:l[0],onChange:t=>j([Number(t.target.value),l[1]]),placeholder:"min"}),"-",e.jsx(C,{label:"",type:"number",className:"border rounded px-2 py-1",value:l[1],onChange:t=>j([l[0],Number(t.target.value)]),placeholder:"max"})]}),e.jsx(I,{variant:"outline",onClick:()=>{g("all"),y("all"),P("all"),v(!1),j([0,1e5])},children:"إعادة تعيين الفلاتر"})]})]}),k?e.jsx(N,{}):e.jsx(D,{productsData:u,setEditRow:b,setOpenForm:n,setOpenTransfare:i,setProductRow:x})]})})}export{ue as default};
