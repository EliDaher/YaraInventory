import{j as s,W,r as d,B as g,Y as _,Z as q}from"./index-B9Hbub3a.js";import{T as J,a as K,b as j,c as D,d as Y,e as m}from"./table-Dn0IiQCR.js";import{C as Z,a as $,b as Q,d as X,c as v}from"./card-DW6a6Si8.js";import{B as U}from"./badge-B0P1iBeR.js";import{I as R}from"./input-2o4aYGpX.js";import{S as ee}from"./search-C1TpxlMX.js";function w({className:p,...x}){return s.jsx("div",{className:W("animate-pulse rounded-md bg-muted",p),...x})}function ce({title:p,description:x,columns:o,data:B,searchable:L=!0,className:P,pageSizeOptions:k=[5,10,20],defaultPageSize:E=10,getRowClassName:u,renderRowActions:l,amountBold:I=!1,onRowClick:N,titleButton:b,isLoading:O}){const[S,z]=d.useState(""),[t,F]=d.useState(null),[c,h]=d.useState(1),[i,H]=d.useState(E),[n,M]=d.useState();d.useEffect(()=>{const e=JSON.parse(localStorage.getItem("InventoryUser")||"null");M(e)},[]);const C=[...B.filter(e=>Object.values(e).some(a=>a==null?void 0:a.toString().toLowerCase().includes(S.toLowerCase())))].sort((e,a)=>{if(!t)return 0;const r=e[t.key],T=a[t.key];return r<T?t.direction==="asc"?-1:1:r>T?t.direction==="asc"?1:-1:0}),f=Math.ceil(C.length/i),y=C.slice((c-1)*i,c*i),A=e=>{let a="asc";(t==null?void 0:t.key)===e&&t.direction==="asc"&&(a="desc"),F({key:e,direction:a})},G=(e,a)=>a==="status"?s.jsx(U,{variant:e=="completed"||e=="تم التسديد"?"default":e=="جاري التسديد"?"secondary":"destructive",className:"capitalize text-center",children:e}):a==="email"?s.jsx("span",{className:"text-muted-foreground",children:e}):a==="createdAt"||a==="date"||a==="timestamp"?s.jsx("span",{className:"text-muted-foreground",children:e instanceof Date?e.toLocaleString("en-GB"):isNaN(Date.parse(e))?e:new Date(e).toLocaleString("en-GB")}):a==="amount"&&I?s.jsx("span",{className:"text-primary font-extrabold text-xl",children:e}):a==="quantity"?s.jsx("span",{className:"",children:typeof e=="number"?e.toFixed(2):e}):a==="totalPrice"?s.jsx("span",{className:"",children:typeof e=="number"?e.toFixed(2):e}):a==="balance"?e>0?s.jsxs("span",{className:"text-green-700 font-bold text-lg",children:["له ",e]}):s.jsxs("span",{className:"text-destructive font-bold text-lg",children:["عليه ",-e]}):e,V=Array.from({length:i});return s.jsxs(Z,{className:P,children:[s.jsx($,{children:s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[s.jsxs("div",{children:[s.jsx(Q,{children:p}),x&&s.jsx(X,{className:"mt-2",children:x})]}),b&&s.jsx(s.Fragment,{children:b})]}),L&&s.jsx("div",{className:"flex w-full max-w-sm items-center space-x-2",children:s.jsxs("div",{className:"relative w-full",children:[s.jsx(ee,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(R,{placeholder:"Search...",value:S,onChange:e=>{z(e.target.value),h(1)},className:"pl-8"})]})})]})}),s.jsxs(v,{className:"space-y-4",children:[s.jsx("div",{className:"overflow-x-auto rounded-md border",children:s.jsxs(J,{className:"",children:[s.jsx(K,{children:s.jsxs(j,{children:[o.map(e=>s.jsx(D,{className:e.hidden||e.onlyAdmin&&(n==null?void 0:n.role)!=="admin"?"hidden":"text-center",children:e.sortable?s.jsxs(g,{variant:"ghost",onClick:()=>{A(e.key),console.log(e.hidden)},className:"h-auto p-0 font-medium",children:[e.label,(t==null?void 0:t.key)===e.key&&s.jsx("span",{className:"ml-1",children:t.direction==="asc"?"↑":"↓"})]}):e.label},e.key)),l&&s.jsx(D,{children:"Actions"})]})}),s.jsx(Y,{className:"",children:O?V.map((e,a)=>s.jsxs(j,{children:[o.map(r=>s.jsx(m,{className:r.hidden||r.onlyAdmin&&(n==null?void 0:n.role)!=="admin"?"hidden":"",children:s.jsx(w,{className:"h-4 w-full rounded-md"})},r.key)),l&&s.jsx(m,{children:s.jsx(w,{className:"h-4 w-16 rounded-md"})})]},`skeleton-${a}`)):y.length>0?y.map((e,a)=>s.jsxs(j,{onClick:()=>N==null?void 0:N(e),className:u?u(e):"",children:[o.map(r=>s.jsx(m,{className:r.hidden||r.onlyAdmin&&(n==null?void 0:n.role)!=="admin"?"hidden":"",children:G(e[r.key],r.key)},r.key)),l&&s.jsx(m,{children:l(e)})]},a)):s.jsx(j,{children:s.jsx(m,{colSpan:o.length+(l?1:0),className:"text-center",children:"No data found."})})})]})}),s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"عدد الاسطر :"}),s.jsx("select",{className:"border rounded px-2 py-1 text-sm bg-background",value:i,onChange:e=>{H(Number(e.target.value)),h(1)},children:k.map(e=>s.jsx("option",{value:e,children:e},e))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(g,{variant:"outline",size:"sm",onClick:()=>h(e=>Math.max(e-1,1)),disabled:c===1,children:s.jsx(_,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-sm",children:["Page ",c," of ",f||1]}),s.jsx(g,{variant:"outline",size:"sm",onClick:()=>h(e=>Math.min(e+1,f)),disabled:c===f||f===0,children:s.jsx(q,{className:"h-4 w-4"})})]})]})]})]})}export{ce as D};
