import{c as d,r,d as m,j as t,D as b,B as f}from"./index-DFYCZ_Ui.js";import{D as g}from"./DataTable-CGzmBEzz.js";import{S}from"./StatsCard-COovixq8.js";import{S as x}from"./SupplierSelect-gsQN1uaa.js";import{P as y}from"./FormInput-DXp87ssn.js";import{g as h}from"./supplier-D6gmlSVj.js";import{H as j}from"./hand-coins-DGQn2U6m.js";import"./input-CeYrCUbq.js";function F(){const i=d(),[l,o]=r.useState(!1),[u,n]=r.useState(null),{data:a,isLoading:D}=m({queryKey:["suppliers-table"],queryFn:h}),p=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"balance",label:"الرصيد",sortable:!0},{key:"purchasesCount",label:"عدد عمليات الشراء",sortable:!0},{key:"updatedDate",label:"اخر عملية",sortable:!0}],c=r.useMemo(()=>(a==null?void 0:a.filter(e=>e.balance>0).reduce((e,s)=>e+Number(s.balance),0))||0,[a]);return t.jsxs(b,{children:[t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.jsx(S,{title:"ديون للموردين",value:c.toFixed(2)||0,icon:j})}),t.jsx(g,{title:"الموردين",titleButton:t.jsx(y,{isOpen:l,setIsOpen:o,title:"اضافة مورد",trigger:t.jsx(f,{className:"w-full",children:"اضافة مورد"}),children:t.jsx(x,{className:"mt-6",isOpen:l,setIsOpen:o,supplierId:u,setSupplierId:n,withDataTable:!0})}),columns:p,data:a?Object.values(a).map(e=>{var s;return typeof e=="object"?{...e,purchasesCount:((s=e.purchases)==null?void 0:s.length)??0}:e}):[],onRowClick:e=>{i("/SupplierDetails",{state:{id:e.id}})}})]})}export{F as default};
