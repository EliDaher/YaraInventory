import{m,r,f as c,j as a,D as d}from"./index-B9Hbub3a.js";import{D as b}from"./DataTable-Dhrv2TO0.js";import{g as p}from"./customer-C8Pj8vHY.js";import{C as f}from"./AddCustomerForm-B0vDxcq7.js";import{S as g}from"./StatsCard-ZcWDh60S.js";import{H as y}from"./hand-coins-B7ySPUCB.js";import"./table-Dn0IiQCR.js";import"./card-DW6a6Si8.js";import"./badge-B0P1iBeR.js";import"./input-2o4aYGpX.js";import"./search-C1TpxlMX.js";import"./FormInput-Cd4NdAnV.js";function w(){const o=m(),[l,u]=r.useState(!1),{data:t,isLoading:x}=c({queryKey:["customers-table"],queryFn:p}),i=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"balance",label:"الرصيد",sortable:!0},{key:"purchasesCount",label:"عدد عمليات الشراء",sortable:!0},{key:"updatedDate",label:"اخر عملية",sortable:!0}],n=r.useMemo(()=>(t==null?void 0:t.filter(e=>e.balance<0).reduce((e,s)=>e+Number(s.balance),0))||0,[t]);return a.jsxs(d,{children:[a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:a.jsx(g,{title:"ديون على الزبائن",value:-n.toFixed(2)||0,icon:y})}),a.jsx(b,{title:"الزبائن",titleButton:a.jsx(f,{isOpen:l,setIsOpen:u,className:"w-full mb-2"}),columns:i,data:t?Object.values(t).map(e=>{var s;return typeof e=="object"?{...e,purchasesCount:((s=e.purchases)==null?void 0:s.length)??0}:e}):[],onRowClick:e=>{o("/customerDetails",{state:{id:e.id}})}})]})}export{w as default};
