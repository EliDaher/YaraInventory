import{R as p,f as h,e as v,j as t,L as C,J as m}from"./index-DXJC0gxo.js";import{P as N,F as d}from"./FormInput-jf5cEK0U.js";import{B as c}from"./button-Dl2RVhdx.js";import{b as k,g as F}from"./supplier-Bd_ZN2GP.js";import{u as q}from"./useMutation-9gywVg79.js";import{D as L}from"./DataTable-DfamvYLU.js";function J({isOpen:b,setIsOpen:s,supplierId:g,setSupplierId:f,className:y,withDataTable:n}){const[a,l]=p.useState(""),[u,i]=p.useState(""),x=h(),o=q({mutationFn:e=>k({...e}),onSuccess:()=>{l(""),i(""),!n&&s(!1),x.invalidateQueries({queryKey:["suppliers-table"]})},onError:e=>{console.error(e),m.error("حدث خطأ أثناء إضافة المورد")}}),{data:r,isLoading:S}=v({queryKey:["suppliers-table"],queryFn:F}),j=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0}];return t.jsxs(N,{title:"اختيار البائع",isOpen:b,setIsOpen:s,trigger:t.jsx(c,{type:"button",variant:"outline",className:`w-full ${y}`,children:g?a:"اختيار المورد"}),children:[n&&(S?t.jsx(C,{}):(r==null?void 0:r.length)===0?t.jsx("div",{className:"py-10 text-center text-muted-foreground",children:"لا يوجد موردين"}):t.jsx(L,{title:"",pageSizeOptions:[3],defaultPageSize:3,onRowClick:e=>{f(e.id),l(e.name),s(!1)},columns:j,data:r||[]})),t.jsx(d,{id:"supplier-name",label:"اسم المورد",value:a,onChange:e=>l(e.target.value)}),t.jsx(d,{type:"number",id:"supplier-number",label:"رقم المورد",value:u,onChange:e=>i(e.target.value)}),t.jsx(c,{type:"button",onClick:()=>{if(!a||!u){m.error("يرجى ملء جميع الحقول");return}else o.mutate({name:a,number:u})},className:"w-full",children:o.isPending?"جاري الإضافة...":"اضافة"})]})}export{J as S};
