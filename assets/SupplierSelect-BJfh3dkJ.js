import{R as p,h as j,f as h,j as t,L as v,B as m}from"./index-B9Hbub3a.js";import{P as C,F as d}from"./FormInput-Cd4NdAnV.js";import{b as N,g as k}from"./supplier-8jLn8UfL.js";import{u as F}from"./badge-B0P1iBeR.js";import{D as q}from"./DataTable-Dhrv2TO0.js";function B({isOpen:c,setIsOpen:l,supplierId:b,setSupplierId:g,className:y,withDataTable:n}){const[r,s]=p.useState(""),[u,i]=p.useState(""),f=j(),o=F({mutationFn:e=>N({...e}),onSuccess:()=>{s(""),i(""),!n&&l(!1),f.invalidateQueries({queryKey:["suppliers-table"]})},onError:e=>{console.error(e),alert("حدث خطأ أثناء إضافة المورد")}}),{data:a,isLoading:x}=h({queryKey:["suppliers-table"],queryFn:k}),S=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0}];return t.jsxs(C,{title:"اختيار البائع",isOpen:c,setIsOpen:l,trigger:t.jsx(m,{type:"button",variant:"outline",className:`w-full ${y}`,children:b?r:"اختيار المورد"}),children:[n&&(x?t.jsx(v,{}):(a==null?void 0:a.length)===0?t.jsx("div",{className:"py-10 text-center text-muted-foreground",children:"لا يوجد موردين"}):t.jsx(q,{title:"",pageSizeOptions:[3],defaultPageSize:3,onRowClick:e=>{g(e.id),s(e.name),l(!1)},columns:S,data:a||[]})),t.jsx(d,{id:"supplier-name",label:"اسم المورد",value:r,onChange:e=>s(e.target.value)}),t.jsx(d,{type:"number",id:"supplier-number",label:"رقم المورد",value:u,onChange:e=>i(e.target.value)}),t.jsx(m,{type:"button",onClick:()=>{if(!r||!u){alert("يرجى ملء جميع الحقول");return}else o.mutate({name:r,number:u})},className:"w-full",children:o.isPending?"جاري الإضافة...":"اضافة"})]})}export{B as S};
