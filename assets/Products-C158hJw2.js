import{r as a,u as L,j as e,L as N}from"./index-D9SdI5e-.js";import{S as T}from"./StatsCard-CGY28aVQ.js";import{D as B}from"./badge-Dp2vQZdV.js";import{A as O,T as R,P as q}from"./TransfareForm-C8asZcJP.js";import{c as A,B as D}from"./button-C_OZHrl6.js";import{C as I,a as E,b as M,c as H}from"./card-ObnbIFWj.js";import{F as h}from"./FilterSelection-9Q_qEMi-.js";import{F as y}from"./FormInput-CpqofyxA.js";import"./house-CssJoYi9.js";import"./useMutation-lyefXRX2.js";import"./transaction-C4sBRcfg.js";import"./index-D4N8_RQu.js";import"./SupplierSelect-DiIWIv5A.js";import"./supplier-D1yL56Mb.js";import"./DataTable-3EKd1hnR.js";import"./table-CcRwBaKs.js";import"./input-DkcmyAx5.js";import"./search-B3u_YPwK.js";import"./PaymentTypeSelector-B2X27g7I.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=A("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);function ie(){const[F,u]=a.useState(!1),[g,j]=a.useState({}),[S,m]=a.useState(!1),[w,C]=a.useState(null),[l,p]=a.useState("all"),[i,x]=a.useState("all"),[c,P]=a.useState("all"),[f,b]=a.useState(!1),[s,d]=a.useState([0,1e5]),{data:o=[],isLoading:v}=L(),n=a.useMemo(()=>{if(!o)return[];let t=o;return l!=="all"&&(t=t.filter(r=>r.warehouse===l)),i!=="all"&&(t=t.filter(r=>r.category===i)),c!=="all"&&(t=t.filter(r=>c==="out"?r.quantity===0:r.quantity>0&&r.quantity<5)),f&&(t=t.filter(r=>r.quantity<=5)),t=t.filter(r=>r.sellPrice>=s[0]&&r.sellPrice<=s[1]),t},[o,l,i,c,f,s]),k=n==null?void 0:n.reduce((t,r)=>t+(r.payPrice||1)*(r.quantity||1),0);return e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{dir:"rtl",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:e.jsx(T,{onClick:()=>{},title:"اجماري رصيد المنتجات",value:k.toFixed(2)||0,icon:V,onlyAdmin:!0})}),e.jsx(O,{isOpen:S,setIsOpen:m,row:w}),e.jsx(R,{isOpen:F,setIsOpen:u,row:g}),e.jsxs(I,{children:[e.jsx(E,{children:e.jsx(M,{children:"الفلاتر"})}),e.jsxs(H,{className:"grid gap-4",children:[e.jsx(h,{DataToFilter:o,selectedFilter:i,setSelectedFilter:x,FilterBy:"category",Placeholder:"اختر الصنف"}),e.jsx(h,{DataToFilter:o,selectedFilter:l,setSelectedFilter:p,FilterBy:"warehouse",Placeholder:"اختر المستودع"}),e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx("span",{children:"السعر:"}),e.jsx(y,{label:"",type:"number",className:"border rounded px-2 py-1",value:s[0],onChange:t=>d([Number(t.target.value),s[1]]),placeholder:"min"}),"-",e.jsx(y,{label:"",type:"number",className:"border rounded px-2 py-1",value:s[1],onChange:t=>d([s[0],Number(t.target.value)]),placeholder:"max"})]}),e.jsx(D,{variant:"outline",onClick:()=>{p("all"),x("all"),P("all"),b(!1),d([0,1e5])},children:"إعادة تعيين الفلاتر"})]})]}),v?e.jsx(N,{}):e.jsx(q,{productsData:n,setEditRow:C,setOpenForm:m,setOpenTransfare:u,setProductRow:j})]})})}export{ie as default};
