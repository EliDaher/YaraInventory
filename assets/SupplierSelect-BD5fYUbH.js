import{R as p,f as j,u as h,j as t}from"./index-BWmFOvvk.js";import{P as v,F as m}from"./FormInput-BFWnl-Us.js";import{B as d}from"./button-DkKObyqW.js";import{b as C,g as N}from"./supplier-D4PlD4NE.js";import{u as k}from"./badge-CVDZ5wrw.js";import{D as F}from"./DataTable-CY1TwsKE.js";import{L as q}from"./Loading-Ca95y7FF.js";function K({isOpen:c,setIsOpen:l,supplierId:b,setSupplierId:f,className:g,withDataTable:i}){const[a,s]=p.useState(""),[u,n]=p.useState(""),y=j(),o=k({mutationFn:e=>C({...e}),onSuccess:()=>{s(""),n(""),!i&&l(!1),y.invalidateQueries({queryKey:["suppliers-table"]})},onError:e=>{console.error(e),alert("حدث خطأ أثناء إضافة المورد")}}),{data:r,isLoading:x}=h({queryKey:["suppliers-table"],queryFn:N}),S=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0}];return t.jsxs(v,{title:"اختيار البائع",isOpen:c,setIsOpen:l,trigger:t.jsx(d,{type:"button",variant:"outline",className:`w-full ${g}`,children:b?a:"اختيار المورد"}),children:[i&&(x?t.jsx(q,{}):(r==null?void 0:r.length)===0?t.jsx("div",{className:"py-10 text-center text-muted-foreground",children:"لا يوجد موردين"}):t.jsx(F,{title:"",pageSizeOptions:[3],defaultPageSize:3,onRowClick:e=>{f(e.id),s(e.name),l(!1)},columns:S,data:r||[]})),t.jsx(m,{id:"supplier-name",label:"اسم المورد",value:a,onChange:e=>s(e.target.value)}),t.jsx(m,{type:"number",id:"supplier-number",label:"رقم المورد",value:u,onChange:e=>n(e.target.value)}),t.jsx(d,{type:"button",onClick:()=>{if(!a||!u){alert("يرجى ملء جميع الحقول");return}else o.mutate({name:a,number:u})},className:"w-full",children:o.isPending?"جاري الإضافة...":"اضافة"})]})}export{K as S};
