import{R as p,u as x,a as j,d as C,j as t,B as m}from"./index-eM_4p6Ew.js";import{P as v,F as d}from"./FormInput-C4U6aokh.js";import{a as N,g as h}from"./supplier-CXV-PHs_.js";import{D as k}from"./DataTable-CcG1Vlhh.js";function z({isOpen:c,setIsOpen:r,supplierId:b,setSupplierId:y,className:g,withDataTable:u}){const[a,l]=p.useState(""),[s,i]=p.useState(""),S=x(),n=j({mutationFn:e=>N({...e}),onSuccess:()=>{l(""),i(""),!u&&r(!1),S.invalidateQueries({queryKey:["suppliers-table"]})},onError:e=>{console.error(e),alert("حدث خطأ أثناء إضافة المورد")}}),{data:o,isLoading:F}=C({queryKey:["suppliers-table"],queryFn:h}),f=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0}];return t.jsxs(v,{title:"اختيار البائع",isOpen:c,setIsOpen:r,trigger:t.jsx(m,{type:"button",variant:"outline",className:`w-full ${g}`,children:b?a:"اختيار المورد"}),children:[u&&t.jsx(k,{title:"",pageSizeOptions:[3],defaultPageSize:3,onRowClick:e=>{y(e.id),l(e.name),r(!1)},columns:f,data:o||[]}),t.jsx(d,{id:"supplier-name",label:"اسم المورد",value:a,onChange:e=>l(e.target.value)}),t.jsx(d,{type:"number",id:"supplier-number",label:"رقم المورد",value:s,onChange:e=>i(e.target.value)}),t.jsx(m,{type:"button",onClick:()=>{if(!a||!s){alert("يرجى ملء جميع الحقول");return}else n.mutate({name:a,number:s})},className:"w-full",children:n.isPending?"جاري الإضافة...":"اضافة"})]})}export{z as S};
