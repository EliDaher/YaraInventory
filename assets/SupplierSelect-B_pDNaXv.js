import{R as p,h as j,f as h,j as t,L as v}from"./index-DiQH1MVD.js";import{P as C,F as m}from"./FormInput-CASvz7qr.js";import{B as d}from"./button-OYVM9TCz.js";import{b as N,g as k}from"./supplier-BLv6n95A.js";import{u as F}from"./useMutation-B7Bn7gVY.js";import{D as q}from"./DataTable-wCIb_9w-.js";function E({isOpen:c,setIsOpen:l,supplierId:b,setSupplierId:g,className:f,withDataTable:n}){const[a,s]=p.useState(""),[u,i]=p.useState(""),y=j(),o=F({mutationFn:e=>N({...e}),onSuccess:()=>{s(""),i(""),!n&&l(!1),y.invalidateQueries({queryKey:["suppliers-table"]})},onError:e=>{console.error(e),alert("حدث خطأ أثناء إضافة المورد")}}),{data:r,isLoading:x}=h({queryKey:["suppliers-table"],queryFn:k}),S=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0}];return t.jsxs(C,{title:"اختيار البائع",isOpen:c,setIsOpen:l,trigger:t.jsx(d,{type:"button",variant:"outline",className:`w-full ${f}`,children:b?a:"اختيار المورد"}),children:[n&&(x?t.jsx(v,{}):(r==null?void 0:r.length)===0?t.jsx("div",{className:"py-10 text-center text-muted-foreground",children:"لا يوجد موردين"}):t.jsx(q,{title:"",pageSizeOptions:[3],defaultPageSize:3,onRowClick:e=>{g(e.id),s(e.name),l(!1)},columns:S,data:r||[]})),t.jsx(m,{id:"supplier-name",label:"اسم المورد",value:a,onChange:e=>s(e.target.value)}),t.jsx(m,{type:"number",id:"supplier-number",label:"رقم المورد",value:u,onChange:e=>i(e.target.value)}),t.jsx(d,{type:"button",onClick:()=>{if(!a||!u){alert("يرجى ملء جميع الحقول");return}else o.mutate({name:a,number:u})},className:"w-full",children:o.isPending?"جاري الإضافة...":"اضافة"})]})}export{E as S};
