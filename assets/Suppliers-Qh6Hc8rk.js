import{l as d,r as s,e as b,j as t}from"./index-CjkZiZSH.js";import{D as f}from"./DataTable-DMCrox0U.js";import{S as g}from"./StatsCard-AQKxSwPw.js";import{D as S}from"./badge-BuRiJ7vp.js";import{S as x}from"./SupplierSelect-B4hatSHp.js";import{B as y}from"./button-BgzGu4Sa.js";import{P as h}from"./FormInput-ZUc2U5_b.js";import{g as j}from"./supplier-Dt2FfB-h.js";import{H as D}from"./hand-coins-57d2eQHF.js";import"./table-BMBfgQsc.js";import"./card-BqDxa_jD.js";import"./input-BnqY-c5L.js";import"./search-Bz7BPxDg.js";import"./user-CdSRfBsv.js";import"./house-DPQolJEK.js";import"./useMutation-2hLPBwUX.js";function A(){const p=d(),[o,l]=s.useState(!1),[u,n]=s.useState(null),{data:r,isLoading:i}=b({queryKey:["suppliers-table"],queryFn:j}),m=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"balance",label:"الرصيد",sortable:!0},{key:"purchasesCount",label:"عدد عمليات الشراء",sortable:!0},{key:"updatedDate",label:"اخر عملية",sortable:!0}],c=s.useMemo(()=>(r==null?void 0:r.filter(e=>e.balance>0).reduce((e,a)=>e+Number(a.balance),0))||0,[r]);return t.jsxs(S,{children:[t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.jsx(g,{title:"ديون للموردين",value:c.toFixed(2)||0,icon:D,loading:i})}),t.jsx(f,{isLoading:i,title:"الموردين",titleButton:t.jsx(h,{isOpen:o,setIsOpen:l,title:"اضافة مورد",trigger:t.jsx(y,{className:"w-full",children:"اضافة مورد"}),children:t.jsx(x,{className:"mt-6",isOpen:o,setIsOpen:l,supplierId:u,setSupplierId:n,withDataTable:!0})}),columns:m,data:r?Object.values(r).map(e=>{var a;return typeof e=="object"?{...e,purchasesCount:((a=e.purchases)==null?void 0:a.length)??0}:e}):[],onRowClick:e=>{p("/SupplierDetails",{state:{id:e.id}})}})]})}export{A as default};
